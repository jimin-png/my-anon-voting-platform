# πΆ Operations Health Endpoints Guide

## 1. μƒμ΅΄/μ¤€λΉ„ μƒνƒ ν™•μΈ: /api/healthz

μ΄ μ—”λ“ν¬μΈνΈλ” API μ„λ²„κ°€ κµ¬λ™ μ¤‘μ΄λ©°, ν•µμ‹¬ μμ΅΄μ„±(MongoDB λ“±)μ— μ •μƒμ μΌλ΅ μ—°κ²°λμ—λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

* **κ²½λ΅:** `/api/healthz` (λλ” `/api/health`)
* **λ©”μ„λ“:** `GET`
* **μ΄μ μ©λ„:** λ΅λ“ λ°Έλ°μ„(Load Balancer) λλ” μ»¨ν…μ΄λ„ μ¤μΌ€μ¤νΈλ μ΄μ… μ‹μ¤ν…(Kubernetes)μ **Liveness/Readiness Probe**λ΅ μ‚¬μ©λ©λ‹λ‹¤.

### μ‘λ‹µ κµ¬μ΅° λ° μƒνƒ

| μƒνƒ μ½”λ“ | JSON μ‘λ‹µ (μμ‹) | μ„¤λ… |
| :--- | :--- | :--- |
| **`200 OK`** | `{"status": "ok", "db": "connected"}` | **μ •μƒ.** API ν”„λ΅μ„Έμ¤κ°€ μ‹¤ν–‰ μ¤‘μ΄λ©°, λ¨λ“  ν•µμ‹¬ μμ΅΄μ„±μ΄ μ •μƒμ μΌλ΅ μ—°κ²°λμ—μµλ‹λ‹¤. |
| **`500 Internal Error`** | `{"status": "error", "db": "disconnected"}` | **μ¤λ¥.** API ν”„λ΅μ„Έμ¤λ” μ‹¤ν–‰ μ¤‘μ΄λ‚, ν•„μ μ™Έλ¶€ μ„λΉ„μ¤(μ: MongoDB) μ—°κ²°μ— μ‹¤ν¨ν–μµλ‹λ‹¤. (νΈλν”½μ„ λ°›μΌλ©΄ μ• λ©λ‹λ‹¤.) |

---

## 2. μ„±λ¥ μ§€ν‘ ν™•μΈ: /api/metrics

μ΄ μ—”λ“ν¬μΈνΈλ” μ„λ²„μ μ„±λ¥ μƒνƒλ¥Ό λ¨λ‹ν„°λ§ μ‹μ¤ν…μ΄ μ½μ„ μ μλ„λ΅ λ…Έμ¶ν•©λ‹λ‹¤.

* **κ²½λ΅:** `/api/metrics`
* **λ©”μ„λ“:** `GET`
* **μ΄μ μ©λ„:** λ©”λ¨λ¦¬ λ„μ, CPU κ³Όλ¶€ν•, μ¦μ€ μ¬μ‹λ„ νμ λ“± **μ¥μ•  μμΈ΅ λ° μ‚¬μ „ μ•λ¦Ό** μ‹μ¤ν… κµ¬μ¶•μ κΈ°λ°μ΄ λ©λ‹λ‹¤. μ΄μν€μ€ μ΄ μ§€ν‘λ¥Ό κΈ°λ°μΌλ΅ μ„κ³„μ  μ•λ¦Ό(Alert)μ„ μ„¤μ •ν•©λ‹λ‹¤.

### μ‘λ‹µ κµ¬μ΅° λ° μƒνƒ

* **μ‘λ‹µ ν•μ‹:** Prometheus ν‘μ¤€ ν…μ¤νΈ ν•μ‹ (key/value μ)
* **μ‘λ‹µ μ½”λ“:** `200 OK` (μ§€ν‘ λ°μ΄ν„° λ°ν™)
* **μ¤λ¥ μ‹:** `500 Internal Server Error` (μ§€ν‘ μμ§‘ μμ²΄μ— λ¬Έμ κ°€ λ°μƒν• κ²½μ°)